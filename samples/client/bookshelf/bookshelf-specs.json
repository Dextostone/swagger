{"info":{"title":"Book Sharing API","version":"1.0.0","description":"This is a backend for distributed library application"},"tags":[{"name":"Book","description":"CRUD Operations for Book"},{"name":"Book Request","description":"Book requesting operations"},{"name":"Book Status","description":"Returns the current status of the book"},{"name":"Book Return and Lost Operations","description":"API's for marking book lost or returned"},{"name":"Book Reports","description":"Reporting for Books and reading statistics"},{"name":"Book Search","description":"Search for Books"},{"name":"Search","description":"Abstract search for all entities"},{"name":"User Reports","description":"Reporting for users"},{"name":"User","description":"CRUD Operations for User"},{"name":"Authenticate","description":"Authenticates User"}],"basePath":"/api","swagger":"2.0","paths":{"/books":{"get":{"operationId":"getBooks","parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["Book"],"summary":"Retrieves list of books","responses":{"200":{"description":"List of books","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/{bookId}":{"get":{"operationId":"getBookById","summary":"Retrieves a book","description":"Retrieves book details by id","tags":["Book"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book to be retrieved","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Book object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"put":{"operationId":"put","summary":"Updates book details","tags":["Book"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"Id of the book to be modified","type":"string"},{"name":"body","in":"body","required":true,"description":"Book object details which needs to be updated","schema":{"type":"object","$ref":"#/definitions/NewBook"}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Updated book object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"delete":{"operationId":"delete","summary":"Deletes book details","tags":["Book"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"Id of the book to be modified","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Deleted book object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/DeletedBook"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book":{"post":{"operationId":"addBook","parameters":[{"name":"body","in":"body","required":true,"description":"Book object which needs to be added to the library","schema":{"$ref":"#/definitions/NewBook"}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["Book"],"summary":"Creates a book","responses":{"200":{"description":"Book object which is added to the library","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user":{"post":{"operationId":"addUser","parameters":[{"name":"body","in":"body","required":true,"description":"User object which needs to be created.","schema":{"$ref":"#/definitions/NewUser"}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Creates an user","responses":{"201":{"description":"Added user.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input"}}}},"/users":{"get":{"operationId":"getUsers","parameters":[{"name":"limit","in":"query","required":false,"description":"Number of users to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching users.","type":"integer"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Retrieves list of users","responses":{"200":{"description":"List of users","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/ResponseUser"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/id/{id}":{"get":{"operationId":"getUser","parameters":[{"name":"id","in":"path","required":true,"description":"Id of user to be retrieved","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Retrieves user details by user id","responses":{"200":{"description":"User object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"put":{"operationId":"putForId","parameters":[{"name":"id","in":"path","required":true,"description":"Id of user to be modified","type":"string"},{"name":"body","in":"body","required":true,"description":"User object details which needs to be updated","schema":{"type":"object","properties":{"email":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"},"roles":{"type":"array","items":{"$ref":"#/definitions/Role"}}}}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Updates user details","responses":{"200":{"description":"Updated user object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"delete":{"operationId":"deleteById","parameters":[{"name":"id","in":"path","required":true,"type":"string","description":"Id of user to be deleted"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Deletes the user which has supplied id","responses":{"200":{"description":"Deleted user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/username/{username}":{"get":{"operationId":"getUserByName","parameters":[{"name":"username","in":"path","required":true,"description":"Name of user to be retrieved","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Retrieves user details by username","responses":{"200":{"description":"User object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"put":{"operationId":"putForName","parameters":[{"name":"username","in":"path","required":true,"description":"Name of user to be modified","type":"string"},{"name":"body","in":"body","required":true,"description":"User object details which needs to be updated","schema":{"type":"object","properties":{"email":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"},"roles":{"type":"array","items":{"$ref":"#/definitions/Role"}}}}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Updates user details","responses":{"200":{"description":"Updated user object","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}},"delete":{"operationId":"deleteByName","parameters":[{"name":"username","in":"path","required":true,"type":"string","description":"Name of user to be deleted"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["User"],"summary":"Deletes the user which has supplied username","responses":{"200":{"description":"Deleted user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"$ref":"#/definitions/ResponseUser"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/request/{bookId}":{"put":{"operationId":"requestBook","description":"Send a request to borrow a book","summary":"Borrow a book","tags":["Book Request"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book which is requested.","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Requested book's current state","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/request/approve/{bookId}/{userId}":{"put":{"operationId":"approveBookRequest","description":"Approve the request for borrowing book","summary":"Lend a book","tags":["Book Request"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book which is requested.","type":"string"},{"name":"userId","in":"path","required":true,"description":"The id of user whose request needs to be approved.","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Requested book's current state","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/request/reject/{bookId}/{userId}":{"put":{"operationId":"rejectBookRequest","description":"Reject the request for borrowing book","summary":"Reject the request for borrowing a book","tags":["Book Request"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book whose request needs to be rejected.","type":"string"},{"name":"userId","in":"path","required":true,"description":"The id of user whose request needs to be rejected.","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Requested book's current state","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/return/{bookId}/{userId}":{"put":{"operationId":"markBookAsReturned","description":"Return borrowed book","summary":"Return Book","tags":["Book Return and Lost Operations"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book which is returned","type":"string"},{"name":"userId","in":"path","required":true,"description":"The id of user who is returning the book. If not provided current logged in user is used","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Requested book's current state","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/lost/{bookId}":{"put":{"operationId":"markBookAsLost","description":"Mark borrowed book as lost","summary":"Mark lost book","tags":["Book Return and Lost Operations"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book which is returned","type":"string"},{"name":"userId","in":"query","required":false,"description":"The id of user who had borrowed the book. If not provided, the recent borrower will be used as default.","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Requested book's current state","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/reports/recently-added":{"get":{"operationId":"getRecentlyAddedBook","description":"Returns recently added book","summary":"Returns recently added book","tags":["Book Reports"],"responses":{"200":{"description":"Recently added book details","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/reports/most-read":{"get":{"operationId":"getMostReadBook","parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved per page","type":"integer"},{"name":"numberOfBooks","in":"query","required":false,"description":"Total number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"description":"Returns most read book","summary":"Returns most read book","tags":["Book Reports"],"responses":{"200":{"description":"Most read book details","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/reports/requested-books":{"get":{"operationId":"getRequestedBooksByUser","description":"Returns list of books requested by the user","summary":"Returns list of books requested by the current logged-in user","tags":["User Reports"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"}],"responses":{"200":{"description":"List of books requested by the user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/reports/borrowed-books":{"get":{"operationId":"getBorrowedBooksByUser","description":"Returns list of books borrowed by the user","summary":"Returns list of books borrowed by the current logged-in user or list of books user is currently reading","tags":["User Reports"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books","type":"integer"}],"responses":{"200":{"description":"List of books borrowed by the user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/reports/lent-books":{"get":{"operationId":"getLentBooksByUser","description":"Returns list of books lent by the user","summary":"Returns list of books lent by the current logged-in user.","tags":["User Reports"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"}],"responses":{"200":{"description":"List of books lent by the user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/reports/lost-books":{"get":{"operationId":"getLostBooksByUser","description":"Returns list of books lost by the user","summary":"Returns list of books lost by the current logged-in user","tags":["User Reports"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"}],"responses":{"200":{"description":"List of books lost by the user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/user/reports/returned-books":{"get":{"operationId":"getReturnedBooksByUser","description":"Returns list of books read by the user","summary":"Returns list of books read by the current logged-in user","tags":["User Reports"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books.","type":"integer"}],"responses":{"200":{"description":"List of books read by the user","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","properties":{"docs":{"type":"array","items":{"$ref":"#/definitions/Book"}},"total":{"type":"integer"},"limit":{"type":"integer"},"page":{"type":"integer"},"pages":{"type":"integer"}}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/search/by-tags":{"get":{"operationId":"searchByTags","description":"Returns list of books having the requested tag{s}","summary":"Returns list of books having the requested tag{s}","tags":["Book Search"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books","type":"integer"},{"name":"tags","in":"query","required":true,"type":"array","items":{"type":"string"},"description":"List of tags by which books can be searched"}],"responses":{"200":{"description":"List of books, filtered by tags","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Searched books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/search/by-author":{"get":{"operationId":"searchByAuthor","description":"Returns list of books written by the requested author{s}","summary":"Returns list of books written by the requested author{s}","tags":["Book Search"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books","type":"integer"},{"name":"author","in":"query","required":true,"type":"array","items":{"type":"string"},"description":"Name of the author by which books can be searched"}],"responses":{"200":{"description":"List of books, filtered by tags","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Searched books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/search/like-name/{name}":{"get":{"operationId":"searchLikeName","description":"Returns list of books which have similar requested name","summary":"Returns list of books which have similar requested name","tags":["Book Search"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of books to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching books","type":"integer"},{"name":"name","in":"path","required":true,"type":"string","description":"Name of the book by which books can be searched"}],"responses":{"200":{"description":"List of books, filtered by tags","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/Book"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Searched books not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/authenticate/login":{"post":{"operationId":"login","description":"Authenticates requested user, with valid credentials","summary":"Authenticates requested user, with valid credentials","tags":["Authenticate"],"parameters":[{"name":"body","in":"body","required":true,"description":"The user object with username and password, which needs to signed-in","schema":{"$ref":"#/definitions/RequestUser"}}],"responses":{"200":{"description":"The logged in user's token which needs to be used in subsequent requests","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"string"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"401":{"description":"Unauthorized","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested user was not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/authenticate/logout":{"post":{"operationId":"logout","description":"Logout current logged-in user","summary":"Logout current logged-in user","tags":["Authenticate"],"parameters":[{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Nothing will be returned as data.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"string","default":""}}}]}},"403":{"description":"Forbidden: access is denied","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/authenticate/revoke-token/{token}":{"put":{"operationId":"revokeToken","parameters":[{"name":"token","in":"path","required":true,"description":"Token which needs to be revoked","type":"string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"tags":["Authenticate"],"summary":"Revokes the requested token","responses":{"200":{"description":"Nothing will be returned as data.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"string","default":""}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"403":{"description":"Forbidden: access is denied","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested token was not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/authenticate/forgot-password/{username}":{"post":{"operationId":"forgotPassword","tags":["Authenticate"],"parameters":[{"name":"username","in":"path","type":"string","required":true,"description":"Name of the user"}],"summary":"Sends an email with the link to reset password","responses":{"200":{"description":"Nothing will be returned as data.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"string","default":""}}}]}},"404":{"description":"Requested user was not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/authenticate/reset-password/{token}":{"get":{"operationId":"resetPassword","tags":["Authenticate"],"parameters":[{"name":"token","in":"path","type":"string","required":true,"description":"Token to identify the user"}],"summary":"Randomely generates the password and sets the password for user identified by token","responses":{"200":{"description":"Nothing will be returned as data.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"string","default":""}}}]}},"401":{"description":"Token expired.","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"example":"Reset password link expired, please regenerate link via forgot-password API"}}}]}},"404":{"description":"Requested user was not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/search":{"get":{"operationId":"search","description":"Returns list of entities matching the searched query string","summary":"Returns list of entities matching the searched query string","tags":["Search"],"parameters":[{"name":"limit","in":"query","required":false,"description":"Number of searched records to be retrieved","type":"integer"},{"name":"page","in":"query","required":false,"description":"Page number from where we want to start fetching searched  records","type":"integer"},{"name":"q","in":"query","required":true,"type":"string","description":"Search string"},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"List of books, filtered by tags","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"array","items":{"type":"object"}}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"No data found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}},"/book/status/{bookId}":{"get":{"operationId":"currentStatusOfBook","description":"Returns current status of the book","summary":"Current status of the book","tags":["Book Status"],"parameters":[{"name":"bookId","in":"path","required":true,"description":"The id of book which is requested.","type":"string"},{"name":"fields","in":"query","required":false,"description":"List of fields which you want as part of response instead of complete status","type":"array","items":{"type":"string"}},{"name":"Authorization","in":"header","type":"string","required":true,"description":"Token which needs to be sent as \"Authorization: Bearer XXXXXX\" "}],"responses":{"200":{"description":"Returns the complete status object as data by default. If \"fields\" query param is passed returns those fields of status e.g. to just know current status as \"lent\" you need to pass \"fields\" as status","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"status":{"default":true},"data":{"type":"object","$ref":"#/definitions/BookState"}}}]}},"400":{"description":"Invalid input","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"404":{"description":"Requested book not found","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"406":{"description":"Not acceptable request.","schema":{"allOf":[{"$ref":"#/definitions/Response"}]}},"500":{"description":"Internal server error","schema":{"allOf":[{"$ref":"#/definitions/Response"},{"type":"object","properties":{"error":{"type":"string"}}}]}}}}}},"definitions":{"NewAuthor":{"type":"object","required":["name"],"properties":{"name":{"type":"string","example":"New Author"},"email":{"type":"string","example":"newauthor@mailinator.com"}}},"Author":{"allOf":[{"$ref":"#/definitions/NewAuthor"},{"type":"object","required":["_id"],"properties":{"_id":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}]},"Role":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"RequestUser":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string","format":"password"}}},"ResponseUser":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"roles":{"type":"array","items":{"$ref":"#/definitions/Role"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"NewUser":{"type":"object","required":["username","password","email"],"properties":{"username":{"type":"string"},"password":{"type":"string","format":"password"},"email":{"type":"string"},"roles":{"type":"array","items":{"$ref":"#/definitions/Role"}}}},"User":{"allOf":[{"$ref":"#/definitions/NewUser"},{"type":"object","required":["_id"],"properties":{"_id":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}]},"NewComment":{"type":"object","properties":{"body":{"type":"string"}}},"Comment":{"allOf":[{"$ref":"#/definitions/NewComment"},{"type":"object","required":["_id"],"properties":{"_id":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"createdBy":{"$ref":"#/definitions/ResponseUser"}}}]},"NewPublisher":{"type":"object","required":["name"],"properties":{"name":{"type":"string","example":"Dummy publisher"},"url":{"type":"array","items":{"type":"string"}},"address":{"type":"object","properties":{"street1":{"type":"string"},"street2":{"type":"string"},"country":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"zip":{"type":"string"}}}}},"Publisher":{"allOf":[{"$ref":"#/definitions/NewPublisher"},{"type":"object","required":["_id"],"properties":{"_id":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}]},"NewBook":{"type":"object","required":["name","authors","publisher","publishedOn"],"properties":{"name":{"type":"string","example":"My new book"},"authors":{"type":"array","items":{"$ref":"#/definitions/NewAuthor"}},"comments":{"type":"array","items":{"$ref":"#/definitions/NewComment"}},"publisher":{"$ref":"#/definitions/NewPublisher"},"publishedOn":{"type":"string","format":"date-time"},"isbn13":{"type":"string"},"isbn10":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}}}},"Book":{"allOf":[{"$ref":"#/definitions/NewBook"},{"type":"object","required":["_id"],"properties":{"_id":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"comments":{"type":"array","items":{"$ref":"#/definitions/Comment"}},"authors":{"type":"array","items":{"$ref":"#/definitions/Author"}}}}]},"DeletedBook":{"allOf":[{"$ref":"#/definitions/Book"},{"type":"object","properties":{"authors":{"type":"array","items":{"type":"string"}}}}]},"NewBookState":{"type":"object","required":["book","uploadedBy","currentStatus"],"properties":{"book":{"type":"object","$ref":"#/definitions/Book"},"currentStatus":{"type":"string"},"uploadedBy":{"type":"object","$ref":"#/definitions/ResponseUser"},"lentBy":{"type":"object","$ref":"#/definitions/ResponseUser"},"lostBy":{"type":"object","$ref":"#/definitions/ResponseUser"},"returnedBy":{"type":"object","$ref":"#/definitions/ResponseUser"},"requestedBy":{"type":"array","items":{"$ref":"#/definitions/ResponseUser"}}}},"BookState":{"allOf":[{"$ref":"#/definitions/NewBookState"},{"type":"object","required":["_id"],"properties":{"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}]},"Response":{"type":"object","properties":{"status":{"type":"boolean","default":false},"message":{"type":"string"}}}},"responses":{},"parameters":{},"securityDefinitions":{}}